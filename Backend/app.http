# IntelliHealth API Testing
# This file contains all API endpoints for testing the IntelliHealth application
# Instructions:
# 1. Run the login request for your desired role (patient/doctor/admin)
# 2. The token will be automatically saved to the corresponding variable
# 3. Use the token in subsequent requests by referencing {{patientToken}}, {{doctorToken}}, or {{adminToken}}

# ============================================
# CONFIGURATION
# ============================================
@host = localhost
@port = 5000
@baseUrl = http://{{host}}:{{port}}

# Token variables (will be auto-populated after login)
@patientToken = 
@doctorToken = 
@adminToken = 

# Test user credentials
@patientEmail = patient@example.com
@patientPassword = Patient@123

@doctorEmail = doctor@example.com
@doctorPassword = Doctor@123

@adminEmail = admin@gmail.com
@adminPassword = Suresh@123

# ============================================
# HEALTH CHECK
# ============================================

### Health Check
GET {{baseUrl}}/health


# ============================================
# AUTHENTICATION ENDPOINTS
# ============================================

### Register Patient
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "John Patient",
  "email": "patient@example.com",
  "password": "Patient@123",
  "role": "patient",
  "gender": "male",
  "dateOfBirth": "1990-01-01",
  "phone": "+12025550100",
  "emergencyContact": {
    "name": "Jane Emergency",
    "phone": "+12025550111",
    "relationship": "Spouse"
  },
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "state": "NY",
    "zipCode": "10001",
    "country": "USA"
  }
}


### Register Doctor
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "Dr. Jane Smith",
  "email": "doctor@example.com",
  "password": "Doctor@123",
  "role": "doctor",
  "gender": "female",
  "dateOfBirth": "1985-05-15",
  "phone": "+12025550200",
  "emergencyContact": {
    "name": "John Smith",
    "phone": "+12025550211",
    "relationship": "Spouse"
  },
  "specialization": "Cardiology",
  "licenseNumber": "DOC-123456",
  "experience": 10,
  "consultationFee": 1500,
  "department": "Cardiology",
  "bio": "Experienced cardiologist specializing in heart diseases and preventive care.",
  "education": [
    {
      "degree": "MBBS",
      "institution": "Harvard Medical School",
      "year": 2010
    },
    {
      "degree": "MD Cardiology",
      "institution": "Johns Hopkins",
      "year": 2015
    }
  ],
  "workingHours": {
    "monday": { "start": "09:00", "end": "17:00", "available": true },
    "tuesday": { "start": "09:00", "end": "17:00", "available": true },
    "wednesday": { "start": "09:00", "end": "17:00", "available": true },
    "thursday": { "start": "09:00", "end": "17:00", "available": true },
    "friday": { "start": "09:00", "end": "17:00", "available": true }
  }
}

### Register Lab
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "name": "Lab Technician",
  "email": "lab@example.com",
  "password": "Lab@123",
  "role": "lab",
  "gender": "male",
  "dateOfBirth": "1992-03-20",
  "phone": "+12025550300",
  "emergencyContact": {
    "name": "Emergency Contact",
    "phone": "+12025550311",
    "relationship": "Family"
  }
}

### Login Patient
# @name loginPatient
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{patientEmail}}",
  "password": "{{patientPassword}}"
}

### Login Doctor
# @name loginDoctor
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{doctorEmail}}",
  "password": "{{doctorPassword}}"
}

### Login Admin
# @name loginAdmin
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "{{adminEmail}}",
  "password": "{{adminPassword}}"
}

### Get Current User (Me)
GET {{baseUrl}}/api/auth/me
Authorization: Bearer {{patientToken}}

### Logout
POST {{baseUrl}}/api/auth/logout
Authorization: Bearer {{patientToken}}

### Refresh Token
POST {{baseUrl}}/api/auth/refresh-token
Content-Type: application/json

{
  "refreshToken": "your-refresh-token-here"
}

### Forgot Password
POST {{baseUrl}}/api/auth/forgot-password
Content-Type: application/json

{
  "email": "{{patientEmail}}"
}

### Reset Password
PUT {{baseUrl}}/api/auth/reset-password/RESET_TOKEN_HERE
Content-Type: application/json

{
  "password": "NewPassword@123"
}


# ============================================
# PATIENT ENDPOINTS
# ============================================

### Patient: Get Dashboard Stats
GET {{baseUrl}}/api/patient/dashboard-stats
Authorization: Bearer {{patientToken}}

### Patient: Get All Appointments
GET {{baseUrl}}/api/patient/appointments
Authorization: Bearer {{patientToken}}

### Patient: Get Appointments by Status
GET {{baseUrl}}/api/patient/appointments?status=scheduled&page=1&limit=10
Authorization: Bearer {{patientToken}}

### Patient: Book Appointment
# Note: Replace doctorId with an actual doctor ID from your database
POST {{baseUrl}}/api/patient/appointments
Authorization: Bearer {{patientToken}}
Content-Type: application/json

{
  "doctor": "DOCTOR_ID_HERE",
  "scheduledDate": "2026-02-15",
  "scheduledTime": "10:30",
  "type": "consultation",
  "reasonForVisit": "Regular checkup and health consultation"
}

### Patient: Get Appointment by ID
GET {{baseUrl}}/api/patient/appointments/APPOINTMENT_ID_HERE
Authorization: Bearer {{patientToken}}

### Patient: Cancel Appointment
PATCH {{baseUrl}}/api/patient/appointments/APPOINTMENT_ID_HERE/cancel
Authorization: Bearer {{patientToken}}

### Patient: Get Prescriptions
GET {{baseUrl}}/api/patient/prescriptions
Authorization: Bearer {{patientToken}}

### Patient: Get Lab Results
GET {{baseUrl}}/api/patient/lab-results
Authorization: Bearer {{patientToken}}

### Patient: Get Medical Records
GET {{baseUrl}}/api/patient/medical-records
Authorization: Bearer {{patientToken}}

### Patient: Update Profile
PUT {{baseUrl}}/api/patient/profile
Authorization: Bearer {{patientToken}}
Content-Type: application/json

{
  "phone": "+12025550150",
  "address": {
    "street": "456 Oak Avenue",
    "city": "Los Angeles",
    "state": "CA",
    "zipCode": "90001",
    "country": "USA"
  }
}


# ============================================
# DOCTOR ENDPOINTS
# ============================================

### Doctor: Get Dashboard Stats
GET {{baseUrl}}/api/doctor/dashboard-stats
Authorization: Bearer {{doctorToken}}

### Doctor: Get All Patients
GET {{baseUrl}}/api/doctor/patients?page=1&limit=10
Authorization: Bearer {{doctorToken}}

### Doctor: Get Patient by ID
GET {{baseUrl}}/api/doctor/patients/PATIENT_ID_HERE
Authorization: Bearer {{doctorToken}}

### Doctor: Get All Appointments
GET {{baseUrl}}/api/doctor/appointments
Authorization: Bearer {{doctorToken}}

### Doctor: Get Appointments by Status
GET {{baseUrl}}/api/doctor/appointments?status=scheduled&page=1&limit=10
Authorization: Bearer {{doctorToken}}

### Doctor: Update Appointment Status
PATCH {{baseUrl}}/api/doctor/appointments/APPOINTMENT_ID_HERE/status
Authorization: Bearer {{doctorToken}}
Content-Type: application/json

{
  "status": "confirmed"
}

### Doctor: Complete Appointment
PATCH {{baseUrl}}/api/doctor/appointments/APPOINTMENT_ID_HERE/complete
Authorization: Bearer {{doctorToken}}
Content-Type: application/json

{
  "diagnosis": "Patient is healthy",
  "notes": "Regular checkup completed. No issues found."
}

### Doctor: Create Prescription
POST {{baseUrl}}/api/doctor/prescriptions
Authorization: Bearer {{doctorToken}}
Content-Type: application/json

{
  "patient": "PATIENT_ID_HERE",
  "appointment": "APPOINTMENT_ID_HERE",
  "medications": [
    {
      "name": "Aspirin",
      "dosage": "100mg",
      "frequency": "Once daily",
      "duration": "30 days",
      "instructions": "Take after breakfast"
    }
  ],
  "notes": "Continue medication for 30 days"
}

### Doctor: Update Profile
PUT {{baseUrl}}/api/doctor/profile
Authorization: Bearer {{doctorToken}}
Content-Type: application/json

{
  "consultationFee": 2000,
  "bio": "Updated bio with more experience",
  "isAvailableForEmergency": true
}


# ============================================
# ADMIN ENDPOINTS
# ============================================

### Admin: Get Dashboard Stats
GET {{baseUrl}}/api/admin/dashboard-stats
Authorization: Bearer {{adminToken}}

### Admin: Get All Users
GET {{baseUrl}}/api/admin/users
Authorization: Bearer {{adminToken}}

### Admin: Get Users by Role
GET {{baseUrl}}/api/admin/users?role=doctor
Authorization: Bearer {{adminToken}}

### Admin: Get User by ID
GET {{baseUrl}}/api/admin/users/USER_ID_HERE
Authorization: Bearer {{adminToken}}

### Admin: Create User (Doctor)
POST {{baseUrl}}/api/admin/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Dr. Michael Johnson",
  "email": "michael.johnson@example.com",
  "password": "Doctor@123",
  "role": "doctor",
  "gender": "male",
  "dateOfBirth": "1980-08-10",
  "phone": "+12025550400",
  "emergencyContact": {
    "name": "Sarah Johnson",
    "phone": "+12025550411",
    "relationship": "Spouse"
  },
  "specialization": "Neurology",
  "licenseNumber": "DOC-789012",
  "experience": 15,
  "consultationFee": 2000,
  "department": "Neurology",
  "bio": "Expert neurologist with 15 years of experience"
}

### Admin: Update User
PUT {{baseUrl}}/api/admin/users/USER_ID_HERE
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "isActive": true,
  "isEmailVerified": true
}

### Admin: Delete User
DELETE {{baseUrl}}/api/admin/users/USER_ID_HERE
Authorization: Bearer {{adminToken}}

### Admin: Get All Appointments
GET {{baseUrl}}/api/admin/appointments
Authorization: Bearer {{adminToken}}

### Admin: Get System Analytics
GET {{baseUrl}}/api/admin/analytics
Authorization: Bearer {{adminToken}}


# ============================================
# DOCTOR PUBLIC ENDPOINTS (No Auth Required)
# ============================================

### Get All Doctors (Public)
GET {{baseUrl}}/api/doctors

### Get Doctor by ID (Public)
GET {{baseUrl}}/api/doctors/DOCTOR_ID_HERE

### Search Doctors by Specialization
GET {{baseUrl}}/api/doctors?specialization=Cardiology

### Search Doctors by Department
GET {{baseUrl}}/api/doctors?department=Cardiology


# ============================================
# FILE UPLOAD (Cloudinary)
# ============================================

### Upload File
# Note: Cloudinary must be configured in .env
POST {{baseUrl}}/api/upload
Authorization: Bearer {{patientToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.png"
Content-Type: image/png

< ./path/to/your/file.png
------WebKitFormBoundary7MA4YWxkTrZu0gW--


# ============================================
# NOTES
# ============================================
# 
# Token Management:
# - After running a login request, copy the token from the response
# - Paste it into the corresponding variable at the top (@patientToken, @doctorToken, @adminToken)
# - Or use the @name directive and response handlers if your HTTP client supports it
#
# Replace Placeholders:
# - DOCTOR_ID_HERE: Get from GET /api/doctors
# - PATIENT_ID_HERE: Get from GET /api/doctor/patients (as doctor) or GET /api/admin/users?role=patient (as admin)
# - APPOINTMENT_ID_HERE: Get from GET /api/patient/appointments or GET /api/doctor/appointments
# - USER_ID_HERE: Get from GET /api/admin/users
#
# Status Values:
# - Appointment: pending, scheduled, confirmed, completed, cancelled
# - User roles: patient, doctor, admin, lab
#
# ============================================
# PRESCRIPTIONS & MEDICAL RECORDS
# ============================================

### Doctor: Get Prescriptions by Patient
GET {{baseUrl}}/api/prescriptions/patient/PATIENT_ID_HERE
Authorization: Bearer {{doctorToken}}

### Doctor: Get My Prescriptions (Doctor view)
GET {{baseUrl}}/api/prescriptions/doctor/me
Authorization: Bearer {{doctorToken}}

### Doctor: Create Medical Record (Diagnosis)
POST {{baseUrl}}/api/medical-records
Authorization: Bearer {{doctorToken}}
Content-Type: application/json

{
  "patientId": "PATIENT_ID_HERE",
  "recordType": "diagnosis",
  "diagnosis": {
    "primary": "Seasonal Allergies",
    "secondary": ["Rhinitis"]
  },
  "treatmentPlan": "Prescribed antihistamines and nasal spray.",
  "vitals": {
    "bloodPressure": "120/80",
    "temperature": 37.0,
    "heartRate": 72
  },
  "notes": "Patient advised to avoid allergens."
}

### Patient: Get My Prescriptions
GET {{baseUrl}}/api/prescriptions/my
Authorization: Bearer {{patientToken}}

### Patient: Get My Medical Records
GET {{baseUrl}}/api/medical-records/my
Authorization: Bearer {{patientToken}}

### Patient: Get Medical Record by ID
GET {{baseUrl}}/api/medical-records/RECORD_ID_HERE
Authorization: Bearer {{patientToken}}
